var win,head;function randomNumber(e,t){var n=Math.random()*(t-e)+e;return Math.round(n)}function startFire(){var e=win.width(),t=$("#smoke"),n=e<700?15:80;for(i=0;i<n;i++){var o=randomNumber(0,3e4);setTimeout((function(){var n=(e<700?50:randomNumber(25,75))+"%",i=win.scrollTop()+win.height();if(i<2200){var o=t.clone();o.css({left:n,top:i}).addClass("smoke"+randomNumber(1,3)),$("body").append(o)}}),o)}}function checkWinPos(e){0===win.scrollTop()&&e&&head.removeClass("not-at-top").addClass("at-top"),win.scrollTop()>100&&head.removeClass("at-top").addClass("not-at-top")}function contactForm(){$("#contact-form").submit((function(){var e=$(this),t="";return e.find(".info").removeClass("is-error").text(""),""==$.trim(e.find("[name=first]").val())?t="First name is required":""==$.trim(e.find("[name=last]").val())?t="Last name is required":""!=$.trim(e.find("[name=phone]").val())||e.find("[name=email]").val().includes("@")||(t="A valid phone number or email address is required"),""==t?($.post("/php/mailer.php",e.serialize()).done((function(t){"success"==t?(e[0].reset(),e.find(".info").text("Message Sent. We will be in touch. Thank you.")):e.find(".info").addClass("is-error").text("Error encountered. Please call us at 704-996-3439.")})),analytics.sendContact()):e.find(".info").addClass("is-error").text(t),!1}))}var sections={activeSection:"",jumping:!1,goTo:function(e,t,n){if(sections.activeSection==e)return!1;var i,o;sections.jumping=!0,i=$(e),sections.activeSection=e,o="/"==t?0:i.offset().top-100,n?$("html, body").stop().animate({scrollTop:o},n?500:0,(function(){sections.jumping=!1})):($("html, body").scrollTop(o),sections.jumping=!1)},inViewCheck:function(e){var t="",n="/";if(sections.jumping)return!1;if(!e){var o=$("#main-menu .jump-link:visible").map((function(){return this.getAttribute("data-section")}));for(i=0;i<=o.length;i++)isScrolledIntoView(o[i])&&(t=o[i],n=$('#main-menu .jump-link[data-section="'+o[i]+'"]').attr("href"),i=o.length+1)}t!=sections.activeSection&&(sections.activeSection=t,window.history.pushState({section:t,path:n},null,n))}},analytics={sendEvent:function(e,t){var n="object"==typeof t?Object.assign({event:e},t):{event:e};dataLayer.push(n)},sendArtist:function(e,t){analytics.sendEvent("artistHover",{artist:e,song:t})},sendContact:function(){analytics.sendEvent("contactFormSubmitted")},sendShowDetails:function(e,t,n){analytics.sendEvent("showDetails",{showSource:e,showTitle:t,showDate:n})}},media={videos:{player:function(e,t){var n=!1;new YT.Player(e,{playerVars:{rel:0},videoId:t,events:{onStateChange:function(e){e.data==YT.PlayerState.PLAYING&&(n||(n=!0))}}})},createVideos:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=function(){$("[data-video]").each((function(){var e=$(this);new media.videos.player(e[0].id,e.data("video"))}))}}}},cookie={set:function(e,t,n){void 0===n&&(n=365);var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var o="expires="+i.toUTCString();document.cookie=e+"="+t+";"+o+";domain="+window.location.hostname+";path=/"},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}};function isScrolledIntoView(e){var t=$(window).scrollTop(),n=$(e);if(0==n.length)return!1;var i=n.offset().top,o=n.height()/2,a=i+o,s=t+$(window).height()/2;return a>s-o-25&&a<s+o+25}$((function(){if(win=$(window),head=$("header"),checkWinPos(),contactForm(),media.videos.createVideos(),-1!==window.location.pathname.indexOf("/sections/")){var e=window.location.pathname;"/"==e[e.length-1]&&(e=e.substring(0,e.length-1));var t=$('a[href="'+e+'"]').data("section");sections.goTo(t,e)}var n=!1,i=0,o=0,a=function(e){o===i?(i=o=0,"function"==typeof e&&e()):setTimeout((function(){o=i,setTimeout((function(){a(e)}),1e3)}),1e3)};win.scroll((function(){checkWinPos(!0),i++,n||(n=!0,a((function(){n=!1,sections.inViewCheck(0===win.scrollTop())})))})),window.onpopstate=function(e){null!=e.state&&null!=e.state.path&&sections.goTo("/"==e.state.path?"":e.state.section,e.state.path)},window.history.scrollRestoration="manual",$(".jump-link").click((function(e){e.preventDefault();var t=$(this),n=t.data("section");if(n!=sections.activeSection){var i=t.attr("href");sections.goTo(n,i,!0),window.history.pushState({section:n,path:i},null,i)}t.hasClass("hero-cta")&&sendEvent("hero-cta")})),$(".band-member").hover((function(){var e=$(this);setTimeout((function(){$("#"+e.attr("id")+":hover").length>0&&(e.find(".band-member-bio").slideDown(),e.find(".band-member-image").addClass("fadeout-image"))}),250)}),(function(){var e=$(this);e.find(".band-member-bio").slideUp(),e.find(".band-member-image").removeClass("fadeout-image")}));for(var s=cookie.get("exit85songs").split(","),r=0;r<s.length;r++){var c=document.getElementById(s[r]);null!=c&&c.classList.add("selected")}$(".cover-block").click((function(e){e.preventDefault();var t=$(this).toggleClass("selected");return t.hasClass("selected")?function(e){var t=document.getElementById(e);if(null==t)return!1;setTimeout(function(){if(t.classList.contains("selected")){analytics.sendArtist(t.getAttribute("data-artist"),t.getAttribute("data-song"));var n=cookie.get("exit85songs").split(",");n.includes(e)||(n.push(e),cookie.set("exit85songs",n.join(",")))}}.bind(this),3e3)}(t[0].id):function(e){if(null==document.getElementById(e))return!1;var t=cookie.get("exit85songs").split(",");if(t.includes(e)){var n=t.indexOf(e);n>=0&&(t.splice(n,1),cookie.set("exit85songs",t.join(",")))}}(t[0].id),!1}))}));